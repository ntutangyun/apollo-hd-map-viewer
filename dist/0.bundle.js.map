{"version":3,"file":"0.bundle.js","sources":["webpack:///./components/Navigation/WindowResizeControl.js","webpack:///./components/Navigation/index.js","webpack:///./utils/script_loader.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _dimension = require('store/dimension');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar WindowResizeControl = function (_React$PureComponent) {\n  (0, _inherits3.default)(WindowResizeControl, _React$PureComponent);\n\n  function WindowResizeControl() {\n    (0, _classCallCheck3.default)(this, WindowResizeControl);\n    return (0, _possibleConstructorReturn3.default)(this, (WindowResizeControl.__proto__ || (0, _getPrototypeOf2.default)(WindowResizeControl)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(WindowResizeControl, [{\n    key: 'getMinimizingIcon',\n    value: function getMinimizingIcon() {\n      return _react2.default.createElement(\n        'svg',\n        { viewBox: '0 0 20 20' },\n        _react2.default.createElement(\n          'defs',\n          null,\n          _react2.default.createElement('path', { d: 'M20 0L0 20h20V0z', id: 'a' }),\n          _react2.default.createElement('path', { d: 'M11.53 18.5l-.03-7h7', id: 'b' }),\n          _react2.default.createElement('path', { d: 'M12 12l7 7', id: 'c' })\n        ),\n        _react2.default.createElement('use', { xlinkHref: '#a', opacity: '.8', fill: '#84b7FF' }),\n        _react2.default.createElement('use', { xlinkHref: '#b', fillOpacity: '0', stroke: '#006AFF', strokeWidth: '2' }),\n        _react2.default.createElement('use', { xlinkHref: '#c', fillOpacity: '0', stroke: '#006AFF', strokeWidth: '2' })\n      );\n    }\n  }, {\n    key: 'getMaximizingIcon',\n    value: function getMaximizingIcon() {\n      return _react2.default.createElement(\n        'svg',\n        { viewBox: '0 0 20 20' },\n        _react2.default.createElement(\n          'defs',\n          null,\n          _react2.default.createElement('path', { d: 'M20 0L0 20h20V0z', id: 'a' }),\n          _react2.default.createElement('path', { d: 'M18.47 11.5l.03 7h-7', id: 'b' }),\n          _react2.default.createElement('path', { d: 'M11 11l7 7', id: 'c' })\n        ),\n        _react2.default.createElement('use', { xlinkHref: '#a', opacity: '.8', fill: '#84b7FF' }),\n        _react2.default.createElement('use', { xlinkHref: '#b', fillOpacity: '0', stroke: '#006AFF', strokeWidth: '2' }),\n        _react2.default.createElement('use', { xlinkHref: '#c', fillOpacity: '0', stroke: '#006AFF', strokeWidth: '2' })\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          type = _props.type,\n          onClick = _props.onClick;\n\n\n      var icon = null;\n      switch (type) {\n        case _dimension.MAP_SIZE.FULL:\n          icon = this.getMinimizingIcon();\n          break;\n        case _dimension.MAP_SIZE.DEFAULT:\n          icon = this.getMaximizingIcon();\n          break;\n        default:\n          console.error('Unknown window size found:', type);\n          break;\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'window-resize-control', onClick: onClick },\n        icon\n      );\n    }\n  }]);\n  return WindowResizeControl;\n}(_react2.default.PureComponent);\n\nexports.default = WindowResizeControl;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _MapNavigator = require('components/Navigation/MapNavigator');\n\nvar _MapNavigator2 = _interopRequireDefault(_MapNavigator);\n\nvar _websocket = require('store/websocket');\n\nvar _websocket2 = _interopRequireDefault(_websocket);\n\nvar _dimension = require('store/dimension');\n\nvar _script_loader = require('utils/script_loader');\n\nvar _script_loader2 = _interopRequireDefault(_script_loader);\n\nvar _WindowResizeControl = require('components/Navigation/WindowResizeControl');\n\nvar _WindowResizeControl2 = _interopRequireDefault(_WindowResizeControl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Navigation = function (_React$Component) {\n  (0, _inherits3.default)(Navigation, _React$Component);\n\n  function Navigation(props) {\n    (0, _classCallCheck3.default)(this, Navigation);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Navigation.__proto__ || (0, _getPrototypeOf2.default)(Navigation)).call(this, props));\n\n    _this.scriptOnLoadHandler = _this.scriptOnLoadHandler.bind(_this);\n\n    if (!_MapNavigator2.default.mapAPILoaded) {\n      var onLoad = function onLoad() {\n        console.log('Map API script loaded.');\n      };\n      if (PARAMETERS.navigation.map === 'BaiduMap') {\n        // For Baidu Map, the callback function is set in the window Object level\n        window.initMap = _this.scriptOnLoadHandler;\n      } else if (PARAMETERS.navigation.map === 'GoogleMap') {\n        // For Google Map, the callback function is set from the <Script>\n        onLoad = _this.scriptOnLoadHandler;\n      }\n\n      (0, _script_loader2.default)({\n        url: PARAMETERS.navigation.mapAPiUrl,\n        onLoad: onLoad,\n        onError: function onError() {\n          console.log('Failed to load map api');\n        }\n      });\n    }\n    return _this;\n  }\n\n  (0, _createClass3.default)(Navigation, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (_MapNavigator2.default.mapAPILoaded) {\n        this.scriptOnLoadHandler();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var _props = this.props,\n          hasRoutingControls = _props.hasRoutingControls,\n          size = _props.size;\n\n\n      if (hasRoutingControls && size === _dimension.MAP_SIZE.FULL) {\n        _MapNavigator2.default.enableControls();\n      } else {\n        _MapNavigator2.default.disableControls();\n      }\n    }\n  }, {\n    key: 'scriptOnLoadHandler',\n    value: function scriptOnLoadHandler() {\n      import('components/Navigation/' + PARAMETERS.navigation.map + 'Adapter').then(function (mapAdapterModule) {\n        var MapAdapterClass = mapAdapterModule.default;\n        var mapAdapter = new MapAdapterClass();\n        _MapNavigator2.default.mapAPILoaded = true;\n        _MapNavigator2.default.initialize(_websocket2.default, mapAdapter);\n        _MapNavigator2.default.disableControls();\n      });\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      _MapNavigator2.default.reset();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props2 = this.props,\n          width = _props2.width,\n          height = _props2.height,\n          size = _props2.size,\n          onResize = _props2.onResize;\n\n\n      if (!['GoogleMap', 'BaiduMap'].includes(PARAMETERS.navigation.map)) {\n        console.error('Map API ' + PARAMETERS.navigation.map + ' is not supported.');\n        return null;\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { displayname: 'navigation', className: 'navigation-view', style: { width: width, height: height } },\n        _react2.default.createElement('div', { id: 'map_canvas' }),\n        _react2.default.createElement(_WindowResizeControl2.default, { type: size, onClick: onResize })\n      );\n    }\n  }]);\n  return Navigation;\n}(_react2.default.Component);\n\nexports.default = Navigation;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = loadScriptAsync;\nfunction loadScriptAsync(_ref) {\n  var url = _ref.url,\n      onLoad = _ref.onLoad,\n      onError = _ref.onError;\n\n  var script = document.createElement('script');\n  script.src = url;\n  script.type = 'text/javascript';\n  script.async = true;\n  script.onload = onLoad;\n  script.onerror = onError;\n  document.body.appendChild(script);\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}